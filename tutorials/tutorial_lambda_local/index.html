
<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Tutorial - Developing AWS Lambdas Locally with Bespoken Proxy">
      
      
      
      
        <link rel="shortcut icon" href="../../assets/images/favicon.png">
      
      <meta name="generator" content="mkdocs-0.16.3, mkdocs-material-1.8.1">
    
    
      
        <title>Running Lambdas Locally - Bespoken Docs</title>
      
    
    
      <script src="../../assets/javascripts/modernizr-1df76c4e58.js"></script>
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application-bfecc7305d.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-02c2a4388f.palette.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../../assets/css/style.css">
    
    
  </head>
  
  
  
  
    <body data-md-color-primary="teal" data-md-color-accent="deep-orange">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <a href="../.." title="Bespoken Docs" class="md-icon md-icon--home md-header-nav__button">
          </a>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  Tutorials - AWS Lambdas
                </span>
              
            
            Running Lambdas Locally
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">close</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result" data-md-lang-search="" data-md-lang-tokenizer="[\s\-]+">
          <div class="md-search-result__meta" data-md-lang-result-none="No matching documents" data-md-lang-result-one="1 matching document" data-md-lang-result-other="# matching documents">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/bespoken/bst" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    
      <i class="md-icon md-icon--home md-nav__button"></i>
    
    Bespoken Docs
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/bespoken/bst" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../getting_started/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../alexa_skills_kit_configuration/" title="Alexa Skill Configuration" class="md-nav__link">
      Alexa Skill Configuration
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Commands
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Commands
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../commands/deploy/" title="bst deploy" class="md-nav__link">
      bst deploy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../commands/intend/" title="bst intend" class="md-nav__link">
      bst intend
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../commands/proxy/" title="bst proxy" class="md-nav__link">
      bst proxy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../commands/speak/" title="bst speak" class="md-nav__link">
      bst speak
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../commands/launch/" title="bst launch" class="md-nav__link">
      bst launch
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../api_nav/" title="API Reference" class="md-nav__link">
      API Reference
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Tutorials - Alexa Skills
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Tutorials - Alexa Skills
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorial_lambda_nodejs/" title="Node.js Lambda" class="md-nav__link">
      Node.js Lambda
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorial_local_server_java/" title="Local Java Server" class="md-nav__link">
      Local Java Server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorial_flask_ask_python/" title="Python & Flask-Ask" class="md-nav__link">
      Python & Flask-Ask
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorial_bst_emulator_nodejs/" title="Alexa Emulator & Node.js" class="md-nav__link">
      Alexa Emulator & Node.js
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Tutorials - Google Actions
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Tutorials - Google Actions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorial_cloud_function/" title="With Cloud Functions" class="md-nav__link">
      With Cloud Functions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorial_configuring_api_ai/" title="With API.AI" class="md-nav__link">
      With API.AI
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8" checked>
    
    <label class="md-nav__link" for="nav-8">
      Tutorials - AWS Lambdas
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Tutorials - AWS Lambdas
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Running Lambdas Locally
      </label>
    
    <a href="./" title="Running Lambdas Locally" class="md-nav__link md-nav__link--active">
      Running Lambdas Locally
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" title="Prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-the-http-service" title="Creating The HTTP Service" class="md-nav__link">
    Creating The HTTP Service
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-the-http-service" title="Testing The HTTP Service" class="md-nav__link">
    Testing The HTTP Service
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#more-neat-stuff" title="More Neat Stuff" class="md-nav__link">
    More Neat Stuff
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorial_lambda_debugger/" title="Debugging Lambdas Locally" class="md-nav__link">
      Debugging Lambdas Locally
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorial_lambda_deploy/" title="Deploying Lambdas" class="md-nav__link">
      Deploying Lambdas
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" title="Prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-the-http-service" title="Creating The HTTP Service" class="md-nav__link">
    Creating The HTTP Service
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-the-http-service" title="Testing The HTTP Service" class="md-nav__link">
    Testing The HTTP Service
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#more-neat-stuff" title="More Neat Stuff" class="md-nav__link">
    More Neat Stuff
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/bespoken/bst/edit/master/docs/tutorials/tutorial_lambda_local.md" title="Edit this page" class="md-icon md-content__icon">edit</a>
                
                
                  <h1>Running Lambdas Locally</h1>
                
                <p>This tutorial shows you how to use Bespoken to test AWS Lambdas locally.</p>
<p>Using this, you can send HTTP requests directly to and from your AWS Lambda (Node.js or Python) on your laptop.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>For Node.js - Install bst:</p>
<ul>
<li><code>$ npm install bespoken-tools -g</code></li>
<li><a href="../../getting_started/">Full Installation Instructions</a></li>
</ul>
<p>For Python - Install bstpy:</p>
<ul>
<li><code>git clone the bstpy repo</code></li>
<li><code>cd bstpy</code></li>
<li><code>pip install -e bstpy</code></li>
<li><a href="https://github.com/bespoken/bstpy/blob/master/README.md">Full Installation Instructions</a></li>
</ul>
<h2 id="creating-the-http-service">Creating The HTTP Service</h2>
<p>These examples are based on our own sample project (which in turn is based on Amazon's HelloWorld Lambda examples). If  you want to use our sample project, just clone this repo:</p>
<pre><code>git clone https://github.com/bespoken/lambda_samples
</code></pre>

<p>Change directories to the cloned project:</p>
<pre><code>cd lambda_samples
</code></pre>

<p>Of course, feel free to use your own existing Lambda project.</p>
<p><strong>Exposing the Node.js Lambda as an HTTP service</strong><br />
Run the <code>bst proxy lambda</code> command to do this:</p>
<pre><code>bst proxy lambda HelloWorld.js --verbose
</code></pre>

<p>The --verbose option will cause additional useful information to be printed to the console.</p>
<p><strong>Exposing the Python Lambda as an HTTP service</strong><br />
Run the <code>bstpy</code> command to do this:</p>
<pre><code>bstpy HelloWorld.handler
</code></pre>

<p>In both cases, the Lambda will be exposed as an HTTP service at http://localhost:10000.</p>
<h2 id="testing-the-http-service">Testing The HTTP Service</h2>
<p>Using curl (from another terminal window, or from the same terminal by running <code>bst</code> or <code>bstpy</code> in the background):</p>
<pre><code>curl -H &quot;Content-Type: application/json&quot; \
  -X POST \
  -d '{&quot;key1&quot;:&quot;value1&quot;,&quot;key2&quot;:&quot;value2&quot;, &quot;key3&quot;: &quot;value3&quot;}' \
  http://localhost:10000
</code></pre>

<p>And the output:</p>
<p><img src='../../assets/images/bst-lambda-local-curl.png' /></p>
<p>The actual output from the Lambda is highlighted in red.</p>
<p>Obviously, much more complex Lambdas and responses are possible. With this complexity, being able to test them locally like this only becomes more vital.</p>
<p><em>Note</em> - we recommend using Postman for these sort of manual tests - it provides essentially a nice UI for curl:
<a href="https://www.getpostman.com/apps">Get Postman</a>.</p>
<h2 id="more-neat-stuff">More Neat Stuff</h2>
<p>This is meant to be a basic demonstration, but there is much more that you can do:  </p>
<p><strong>Auto-reload</strong><br />
When you make changes to your lambda code, <code>bst</code> and <code>bstpy</code> will automatically re-load the changes without restarting the server.</p>
<p><strong>Debugging</strong><br />
You can step through your code using your favorite IDE. <a href="../tutorial_lambda_debugger">Follow this tutorial</a> to learn how easy this is to setup.</p>
<p><strong>Webhooks</strong><br />
Using the URL printed out when the <code>bst proxy</code> starts up, you can access your local service from across the web.</p>
<p><img src='../../assets/images/bst-lambda-local-proxy.png' /></p>
<p>Take the URL that is printed out for you and see that you can hit it from anywhere on the web.</p>
<p>This is extremely useful for debugging Webhook-based services (like Facebook Messenger Platform, Alexa Skills, Slack Webhooks, Microsoft Bot framework, etc.) that require having a public-facing server.</p>
<p><strong>Deployment</strong><br />
For Node.js Lambdas, we have a one-step deploy tool. You can <a href="../../commands/deploy">read about it here</a>.</p>
<p><strong>Alexa Skills</strong><br />
We have built this originally to make it super-easy to develop Alexa skills. We offer an <a href="http://docs.bespoken.tools">array of commands and APIs</a> that aim to make developing for Alexa faster and more bullet-proof.  </p>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../tutorial_configuring_api_ai/" title="With API.AI" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                With API.AI
              </span>
            </div>
          </a>
        
        
          <a href="../tutorial_lambda_debugger/" title="Debugging Lambdas Locally" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Debugging Lambdas Locally
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application-6940329b9f.js"></script>
      
      
      <script>app.initialize({url:{base:"../.."}})</script>
      
        <script src="../../api/assets/js/main.js"></script>
      
        <script src="../../api/assets/js/search.js"></script>
      
    
    
      
      <script>!function(e,t,a,n,o,c,i){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,c=t.createElement(a),i=t.getElementsByTagName(a)[0],c.async=1,c.src=n,i.parentNode.insertBefore(c,i)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-99287066-2","docs.bespoken.io"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var t=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",t,e.href)})});var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})</script>
      
    
  </body>
</html>